import{r as d,C as s,U as p,_ as m,B as h,Q as g,S as f}from"./index-44f46734.js";import{u as C,A as x,D as y}from"./index-061eed0f.js";import{u as S}from"./index-cd542a3f.js";import{u as c,F as j}from"./useTranslation-d8fa09dd.js";import{u as k}from"./catering.store-4079f7ed.js";import{u as D}from"./use-disclosure-2e496f2b.js";import{S as A}from"./Stack-4c9ab219.js";import"./createReactComponent-c8129e90.js";import"./index-b8fef48f.js";import"./Table-f298c8d3.js";import"./Text-2cd549b4.js";import"./Popover-5d48ff7b.js";const v=({totalSupplier:e,department:{name:n,code:t}})=>{const r=c(),[a,{open:o,close:i}]=D(!1),l=d.useMemo(()=>`${r("Supplier Settings")} - ${n} (${t})`,[r,n,t]);return s.jsxs("div",{children:[s.jsx(p,{onClick:o,children:e||"-"}),s.jsx(m,{opened:a,onClose:i,title:l,centered:!0,size:"lg",classNames:{title:"c-catering-font-bold"},children:s.jsx(h,{h:"50dvh",children:"TODO"})})]})},{response:E}=g[f.GET_DEPARTMENTS].schema;E.shape.departments.transform(e=>e[0]);const M=e=>[{key:"name",sortable:!0,header:e("Catering name"),width:"20%"},{key:"code",header:e("Code"),width:"15%",textAlign:"left"},{key:"catering-type",header:e("Type"),width:"15%",renderCell:(n,t)=>{var r;return(r=t.others)!=null&&r.isCenter?e("Central catering"):e("Non-central catering")}},{key:"enabled",header:e("Status"),width:"15%",renderCell:n=>e(n?"In operation":"Stopped")},{key:"inventory-check-date",header:e("Inventory check date"),width:"10%",renderCell:(n,t)=>{var r;return(r=t.others)!=null&&r.lastInventoryDate?t.others.lastInventoryDate.toLocaleDateString():"N/A"}},{key:"suppliers",header:e("Suppliers"),width:"10%",style:{textAlign:"right",paddingRight:"1rem"},renderCell:(n,t)=>{var a;const r=parseInt(((a=t.others)==null?void 0:a.totalSupplier)||"0");return s.jsx(v,{department:t,totalSupplier:r})}}],U=()=>{const e=c(),{reload:n,caterings:t}=k(),r=d.useMemo(()=>M(e),[e]);C(n);const a=d.useCallback(()=>Array.from(t.values()),[t]),{data:o,names:i,filter:l,change:u}=S({reload:a});return s.jsxs(A,{gap:10,children:[s.jsx(j,{justify:"end",align:"center",children:s.jsx(x,{onEnter:l,data:i,onChange:u})}),s.jsx(y,{hasOrderColumn:!0,columns:r,data:o})]})};export{U as default};
