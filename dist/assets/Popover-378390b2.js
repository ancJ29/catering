import{r as p,h as he,f as K,c as R,ap as Pe,a0 as L,R as g,a1 as ve,a3 as ye,aq as xe,B as Ce,g as De,$ as Ee,i as Oe,z as Re,a as _,s as Te,t as be,a2 as Fe,v as Se,y as Ne,ar as Ie}from"./index-344213bf.js";import{q as ke,u as ze,m as Ae,o as $e,s as _e,r as Me,f as Ke,i as Le,b as Ue,t as Ve,n as Xe,p as Ye}from"./createReactComponent-9318f0fb.js";const je=()=>{};function qe(e,a={active:!0}){return typeof e!="function"||!a.active?a.onKeyDown||je:t=>{var i;t.key==="Escape"&&(e(t),(i=a.onTrigger)==null||i.call(a))}}const M=["mousedown","touchstart"];function Be(e,a,t){const i=p.useRef();return p.useEffect(()=>{const l=n=>{const{target:o}=n??{};if(Array.isArray(t)){const s=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";t.every(c=>!!c&&!n.composedPath().includes(c))&&!s&&e()}else i.current&&!i.current.contains(o)&&e()};return(a||M).forEach(n=>document.addEventListener(n,l)),()=>{(a||M).forEach(n=>document.removeEventListener(n,l))}},[i,e,t]),i}const[He,U]=he("Popover component was not found in the tree");var V={dropdown:"m-38a85659",arrow:"m-a31dc6c1"};const We={},T=K((e,a)=>{var h,P,v,x;const t=R("PopoverDropdown",We,e),{className:i,style:l,vars:n,children:o,onKeyDownCapture:s,variant:u,classNames:c,styles:m,...f}=t,r=U(),w=Pe({opened:r.opened,shouldReturnFocus:r.returnFocus}),D=r.withRoles?{"aria-labelledby":r.getTargetId(),id:r.getDropdownId(),role:"dialog",tabIndex:-1}:{},E=L(a,r.floating);return r.disabled?null:g.createElement(ve,{...r.portalProps,withinPortal:r.withinPortal},g.createElement(ye,{mounted:r.opened,...r.transitionProps,transition:((h=r.transitionProps)==null?void 0:h.transition)||"fade",duration:((P=r.transitionProps)==null?void 0:P.duration)??150,keepMounted:r.keepMounted,exitDuration:typeof((v=r.transitionProps)==null?void 0:v.exitDuration)=="number"?r.transitionProps.exitDuration:(x=r.transitionProps)==null?void 0:x.duration},O=>g.createElement(xe,{active:r.trapFocus},g.createElement(Ce,{...D,...f,variant:u,ref:E,onKeyDownCapture:qe(r.onClose,{active:r.closeOnEscape,onTrigger:w,onKeyDown:s}),"data-position":r.placement,...r.getStyles("dropdown",{className:i,props:t,classNames:c,styles:m,style:[{...O,zIndex:r.zIndex,top:r.y??0,left:r.x??0,width:r.width==="target"?void 0:De(r.width)},l]})},o,g.createElement(ke,{ref:r.arrowRef,arrowX:r.arrowX,arrowY:r.arrowY,visible:r.withArrow,position:r.placement,arrowSize:r.arrowSize,arrowRadius:r.arrowRadius,arrowOffset:r.arrowOffset,arrowPosition:r.arrowPosition,...r.getStyles("arrow",{props:t,classNames:c,styles:m})})))))});T.classes=V;T.displayName="@mantine/core/PopoverDropdown";const Ze={refProp:"ref",popupType:"dialog"},X=K((e,a)=>{const{children:t,refProp:i,popupType:l,...n}=R("PopoverTarget",Ze,e);if(!Ee(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=n,s=U(),u=L(s.reference,t.ref,a),c=s.withRoles?{"aria-haspopup":l,"aria-expanded":s.opened,"aria-controls":s.getDropdownId(),id:s.getTargetId()}:{};return p.cloneElement(t,{...o,...c,...s.targetProps,className:Oe(s.targetProps.className,o.className,t.props.className),[i]:u,...s.controlled?null:{onClick:s.onToggle}})});X.displayName="@mantine/core/PopoverTarget";function Ge(e,a){var i,l,n,o;const t=[$e(e.offset)];return(i=e.middlewares)!=null&&i.shift&&t.push(_e({limiter:Me()})),(l=e.middlewares)!=null&&l.flip&&t.push(Ke()),(n=e.middlewares)!=null&&n.inline&&t.push(Le()),t.push(Ue({element:e.arrowRef,padding:e.arrowOffset})),((o=e.middlewares)!=null&&o.size||e.width==="target")&&t.push(Ve({apply({rects:s,availableWidth:u,availableHeight:c}){var r,w;const f=((r=a().refs.floating.current)==null?void 0:r.style)??{};(w=e.middlewares)!=null&&w.size&&Object.assign(f,{maxWidth:`${u}px`,maxHeight:`${c}px`}),e.width==="target"&&Object.assign(f,{width:`${s.reference.width}px`})}})),t}function Je(e){const[a,t]=Re({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),i=()=>{var o;a&&((o=e.onClose)==null||o.call(e),t(!1))},l=()=>{var o,s;a?((o=e.onClose)==null||o.call(e),t(!1)):((s=e.onOpen)==null||s.call(e),t(!0))},n=ze({placement:e.position,middleware:Ge(e,()=>n)});return Ae({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:n}),_(()=>{var o;(o=e.onPositionChange)==null||o.call(e,n.placement)},[n.placement]),_(()=>{var o,s;e.opened?(s=e.onOpen)==null||s.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:n,controlled:typeof e.opened=="boolean",opened:a,onClose:i,onToggle:l}}const Qe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Te("popover"),__staticSelector:"Popover",width:"max-content"},er=Se((e,{radius:a,shadow:t})=>({dropdown:{"--popover-radius":a===void 0?void 0:Ne(a),"--popover-shadow":Ie(t)}}));function C(e){var N,I,k,z,A,$;const a=R("Popover",Qe,e),{children:t,position:i,offset:l,onPositionChange:n,positionDependencies:o,opened:s,transitionProps:u,width:c,middlewares:m,withArrow:f,arrowSize:r,arrowOffset:w,arrowRadius:D,arrowPosition:E,unstyled:h,classNames:P,styles:v,closeOnClickOutside:x,withinPortal:O,portalProps:Y,closeOnEscape:j,clickOutsideEvents:q,trapFocus:B,onClose:H,onOpen:W,onChange:Z,zIndex:G,radius:J,shadow:Q,id:ee,defaultOpened:re,__staticSelector:b,withRoles:te,disabled:oe,returnFocus:ae,variant:se,keepMounted:ne,vars:ie,...le}=a,de=be({name:b,props:a,classes:V,classNames:P,styles:v,unstyled:h,rootSelector:"dropdown",vars:ie,varsResolver:er}),F=p.useRef(null),[ce,ue]=p.useState(null),[pe,fe]=p.useState(null),{dir:we}=Xe(),S=Fe(ee),d=Je({middlewares:m,width:c,position:Ye(we,i),offset:typeof l=="number"?l+(f?r/2:0):l,arrowRef:F,arrowOffset:w,onPositionChange:n,positionDependencies:o,opened:s,defaultOpened:re,onChange:Z,onOpen:W,onClose:H});Be(()=>x&&d.onClose(),q,[ce,pe]);const ge=p.useCallback(y=>{ue(y),d.floating.refs.setReference(y)},[d.floating.refs.setReference]),me=p.useCallback(y=>{fe(y),d.floating.refs.setFloating(y)},[d.floating.refs.setFloating]);return g.createElement(He,{value:{returnFocus:ae,disabled:oe,controlled:d.controlled,reference:ge,floating:me,x:d.floating.x,y:d.floating.y,arrowX:(k=(I=(N=d.floating)==null?void 0:N.middlewareData)==null?void 0:I.arrow)==null?void 0:k.x,arrowY:($=(A=(z=d.floating)==null?void 0:z.middlewareData)==null?void 0:A.arrow)==null?void 0:$.y,opened:d.opened,arrowRef:F,transitionProps:u,width:c,withArrow:f,arrowSize:r,arrowOffset:w,arrowRadius:D,arrowPosition:E,placement:d.floating.placement,trapFocus:B,withinPortal:O,portalProps:Y,zIndex:G,radius:J,shadow:Q,closeOnEscape:j,onClose:d.onClose,onToggle:d.onToggle,getTargetId:()=>`${S}-target`,getDropdownId:()=>`${S}-dropdown`,withRoles:te,targetProps:le,__staticSelector:b,classNames:P,styles:v,unstyled:h,variant:se,keepMounted:ne,getStyles:de}},t)}C.Target=X;C.Dropdown=T;C.displayName="@mantine/core/Popover";C.extend=e=>e;export{C as P};
