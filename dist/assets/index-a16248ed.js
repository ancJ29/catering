import{Q as d,S as n,F as p,r as c,C as a,T as t,D as i}from"./index-344213bf.js";import{u as l,l as u,F as P}from"./useTranslation-e97efc14.js";import{c as m}from"./index-b822ee52.js";import{u as b}from"./use-form-0557ef85.js";import{T as g}from"./TextInput-028a1133.js";d[n.CHANGE_PASSWORD].schema;const x={currentPassword:"",newPassword:"",reNewPassword:""},N=()=>{const s=l(),{user:o}=p(),r=b({initialValues:x,validate:e=>({currentPassword:!e.currentPassword,newPassword:!e.newPassword||e.newPassword===e.currentPassword,reNewPassword:e.newPassword!==e.reNewPassword})}),w=c.useCallback(async()=>{const e=await m({action:n.CHANGE_PASSWORD,params:{password:r.values.newPassword.trim().toString(),currentPassword:r.values.currentPassword.trim().toString()},options:{toastMessage:s("Password updated")}});u.debug("change-password result",e),e?r.reset():r.setErrors({currentPassword:s("Password is incorrect")})},[r,s]);return a.jsx(P,{align:"center",justify:"center",children:a.jsxs("form",{onSubmit:r.onSubmit(w),children:[a.jsx(g,{disabled:!0,pb:".8rem",w:"30vw",label:s("Username"),value:o==null?void 0:o.userName,placeholder:s("Enter username")}),a.jsx(t,{pb:".8rem",w:"30vw",label:s("Password"),placeholder:s("Enter password"),...r.getInputProps("currentPassword")}),a.jsx(t,{pb:".8rem",w:"30vw",label:s("New password"),placeholder:s("Enter new password"),...r.getInputProps("newPassword")}),a.jsx(t,{pb:".8rem",w:"30vw",label:s("Re enter new password"),placeholder:s("Re enter new password"),...r.getInputProps("reNewPassword")}),a.jsx(i,{type:"submit",disabled:!r.isValid(),children:s("Update password")})]})})};export{N as default};
